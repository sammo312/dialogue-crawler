{"mappings":";;;;AAAA,iDAAiD;AACjD,+BAA+B;;;;AGAxB,MAAM,4CAAkB,CAAA,GAAA,uBAAK,EAAE,GAAG,CAAC;;;AAG1C,CAAC;AAEM,MAAM,4CAAgB,CAAA,GAAA,uBAAK,EAAE,GAAG,CAAC;eACzB,EAAE,CAAC,cAAE,UAAU,EAAE,GAAK,cAAc,aAAa;;SAEvD,EAAE,CAAC,aAAE,SAAS,EAAE,GAAK,aAAa,QAAQ;;cAErC,EAAE,CAAC,WAAE,OAAO,EAAE,GAAK,WAAW,QAAQ;;;AAGpD,CAAC;AAEM,MAAM,4CAAoB,CAAA,GAAA,uBAAK,EAAE,GAAG,CAAC;eAC7B,EAAE,CAAC,cAAE,UAAU,EAAE,GAAK,cAAc,aAAa;;oBAE5C,EAAE,CAAC,WAAE,OAAO,EAAE,GAAK,WAAW,QAAQ;;;;SAIjD,EAAE,CAAC,aAAE,SAAS,EAAE,GAAK,aAAa,UAAU;;;;;;;AAOrD,CAAC;AAIM,MAAM,4CAAsB,CAAA,GAAA,uBAAK,EAAE,GAAG,CAAC;EAC5C,EAAE,CAAC,SAAE,KAAK,EAAE,GAAK,MAAM;AACzB,CAAC;AACM,MAAM,4CAAuB,CAAA,GAAA,uBAAK,EAAE,GAAG,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwE/C,CAAC;;;AD1GM,MAAM,4CAAY,CAAC,iBACtB,aAAa,WACb,OAAO,WACP,OAAO,aACP,SAAS,cACT,UAAU,aACV,SAAS,WACT,OAAO,EACR;IACC,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,CAAA,GAAA,eAAO,EAAE;IACrD,MAAM,CAAC,mBAAmB,qBAAqB,GAAG,CAAA,GAAA,eAAO,EAAE,EAAE;IAC7D,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,CAAA,GAAA,eAAO,EAAE,EAAE;IACzD,MAAM,CAAC,YAAY,cAAc,GAAG,CAAA,GAAA,eAAO,EAAE;IAE7C,MAAM,cAAc,CAAA,GAAA,aAAK;IACzB,MAAM,eAAe;QAAC;QAAG;QAAI;QAAK;QAAK;QAAK;KAAI;IAEhD,CAAA,GAAA,gBAAQ,EAAE;QACR,qBAAqB,EAAE;QACvB;QACA,cAAc,YAAY,OAAO;IACnC,GAAG;QAAC;KAAe;IAEnB,CAAA,GAAA,gBAAQ,EAAE;QACR,IAAI,YAAY;YACd,MAAM,gBAAgB,CAAC;gBACrB,IAAI,iBAAiB,QAAQ,MAAM,GAAG,KAAK,EAAE,OAAO,KAAK,IACvD,kBAAkB,CAAC,QAAU,QAAQ;YAIzC;YAEA,SAAS,gBAAgB,CAAC,WAAW;YAErC,OAAO;gBACL,SAAS,mBAAmB,CAAC,WAAW;YAC1C;QACF;IACF,GAAG;QAAC;KAAW;IAEf,MAAM,gBAAgB,CAAC,QAAE,IAAI,SAAE,KAAK,SAAE,KAAK,aAAE,SAAS,mBAAE,eAAe,EAAE;QACvE,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,eAAO,EAAE;QAC3C,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,eAAO,EAAE;QACnC,MAAM,cAAc,CAAA,GAAA,aAAK;QAEzB,CAAA,GAAA,gBAAQ,EAAE;YACR,IAAI,iBACF,mBAAmB;YAErB,MAAM,WAAW,YAAY;gBAC3B,SAAS,CAAC,QAAU,QAAQ;YAC9B,GAAG;YACH,YAAY,OAAO,GAAG;YACtB,OAAO,IAAM,cAAc;QAC7B,GAAG,EAAE;QAEL,CAAA,GAAA,gBAAQ,EAAE;YACR,IAAI,QAAQ,MAAM,QAAQ;gBACxB,IAAI,YACF,cAAc;gBAEhB,aAAa,CAAC,YAAc,YAAY,IAAI,CAAC,MAAM;YACrD,OAAO;gBACL,IAAI,cAAc,OAAO,CAAC,eAAe,CAAC,MAAM,GAAG,GACjD,cAAc;gBAEhB,cAAc,YAAY,OAAO;YACnC;QACF,GAAG;YAAC;SAAM;QAEV,qBAAO,gBAAC,CAAA,GAAA,yCAAkB;YAAE,OAAO;sBAAQ;;IAC7C;IAEA,MAAM,WAAW,CAAC;QAChB,IAAI,MAAM;QACV,IAAI,MAAM,GACR,MAAM,OAAO,CAAC,eAAe,CAAC,KAAK,CAAC,GAAG,GAAG,MAAM,CAC9C,CAAC,YAAY,IAAM,aAAa,EAAE,KAAK,GAAG,EAAE,IAAI,CAAC,MAAM,EACvD;QAGJ,OAAO;IACT;IAEA,MAAM,gBAAgB;QACpB,IAAK,IAAI,IAAI,GAAG,IAAI,OAAO,CAAC,eAAe,EAAE,QAAQ,IACnD,WAAW;YACT,IACE,OAAO,OAAO,CAAC,eAAe,CAAC,EAAE,KAAK,YACtC,CAAC,MAAM,OAAO,CAAC,OAAO,CAAC,eAAe,CAAC,EAAE,KACzC,OAAO,CAAC,eAAe,CAAC,EAAE,KAAK,MAE/B,qBAAqB,CAAC,oBAAsB;uBACvC;kCACH,iBAAC;;4BACE,2BACC,iBAAC;gCACC,OAAO;oCACL,WAAW;oCACX,cAAc;oCACd,UAAU;oCACV,YAAY;oCACZ,YAAY;gCACd;;oCAEC,OAAO,CAAC,eAAe,CAAC,EAAE,CAAC,KAAK,GAAG,OAAO;oCAC1C,OAAO,CAAC,eAAe,CAAC,EAAE,CAAC,KAAK,IAAI,OACnC,OAAO,CAAC,eAAe,CAAC,EAAE,CAAC,KAAK,IAAI,OACpC;oCACD,OAAO,CAAC,eAAe,CAAC,EAAE,CAAC,KAAK,GAAG,OAAO;oCAAS;oCAClD,OAAO,CAAC,eAAe,CAAC,EAAE,CAAC,KAAK,GAAG,OAAO,CAAC,eAAe,CAAC,EAAE,CAAC,IAAI,CAAC,MAAM;oCAAC;;;0CAGhF,gBAAC;gCAEC,MAAM,OAAO,CAAC,eAAe,CAAC,EAAE,CAAC,IAAI;gCACrC,OAAO,OAAO,CAAC,eAAe,CAAC,EAAE,CAAC,KAAK;gCACvC,OAAO,OAAO,CAAC,eAAe,CAAC,EAAE,CAAC,KAAK;gCACvC,iBAAiB,OAAO,CAAC,eAAe,CAAC,EAAE,EAAE;gCAC7C,WAAW;+BALN;;uBApBC;iBA4BX;iBACI;gBACL,MAAM,WAAW,YAAY,KAAO,GAAG,OAAO,CAAC,eAAe,CAAC,EAAE;gBACjE,YAAY,OAAO,GAAG;gBAEtB,OAAO,IAAM,cAAc;YAC7B;QACF,GAAG,SAAS;IAEhB;IAEA,qBACE,iBAAC,CAAA,GAAA,yCAAc;;0BACb,gBAAC,CAAA,GAAA,yCAAY;gBAAE,YAAY;gBAAY,WAAW;gBAAW,SAAS;0BACnE;;0BAEH,iBAAC,CAAA,GAAA,yCAAgB;gBAAE,YAAY;gBAAY,WAAW;gBAAW,SAAS;;oBACvE;oBACA,4BACC,gBAAC,CAAA,GAAA,yCAAmB;wBAClB,SAAS;4BACP,IAAI,iBAAiB,QAAQ,MAAM,GAAG,GACpC,kBAAkB,CAAC,QAAU,QAAQ;wBAIzC;kCAEA,cAAA,gBAAC;sCAAI;;;;;YAIV,gBAAgB,GAAG,CAAC,CAAC,QAAQ,sBAC5B,gBAAC;oBAEC,SAAS,OAAO,OAAO;oBACvB,OAAO;wBAAE,iBAAiB;wBAAS,SAAS;wBAAI,QAAQ;wBAAI,OAAO;wBAAS,QAAQ;oBAAU;8BAE7F,OAAO,IAAI;mBAJP;;;AASf;;;","sources":["src/index.js","src/components/TextCrawl/index.js","src/components/TextCrawl/Main.js","src/components/TextCrawl/Styles.js"],"sourcesContent":["// import { createRoot } from \"react-dom/client\";\n// import { App } from \"./App\";\nimport {TextCrawl} from './components/TextCrawl'\n\nexport { TextCrawl }\n","export * from './Main'","import { useEffect, useRef, useState } from \"react\";\nimport { ContainerStyled, DialogueButtonStyled, SpeakerStyled, TextComponentStyled, TextWrapperStyled } from \"./Styles\";\n\nexport const TextCrawl = ({\n    setSceneIndex,\n    textArr,\n    speaker,\n    buildMode,\n    fontFamily,\n    textColor,\n    bgColor,\n  }) => {\n    const [textArrayIndex, setTextArrayIndex] = useState(0);\n    const [displayedElements, setDisplayedElements] = useState([]);\n    const [responseOptions, setResponseOptions] = useState([]);\n    const [showButton, setShowButton] = useState(false);\n  \n    const intervalRef = useRef();\n    const presetSpeeds = [0, 40, 100, 500, 700, 800];\n  \n    useEffect(() => {\n      setDisplayedElements([]);\n      handleDisplay();\n      clearInterval(intervalRef.current);\n    }, [textArrayIndex]);\n  \n    useEffect(() => {\n      if (showButton) {\n        const handleKeyDown = (e) => {\n          if (textArrayIndex < textArr.length - 1 && e.keyCode === 65) {\n            setTextArrayIndex((index) => index + 1);\n          } else {\n            // setSceneIndex(index => index + 1)\n          }\n        };\n  \n        document.addEventListener('keydown', handleKeyDown);\n  \n        return () => {\n          document.removeEventListener('keydown', handleKeyDown);\n        };\n      }\n    }, [showButton]);\n  \n    const TextComponent = ({ text, speed, style, wordIndex, responseOptions }) => {\n      const [crawlText, setCrawlText] = useState('');\n      const [index, setIndex] = useState(0);\n      const intervalRef = useRef();\n  \n      useEffect(() => {\n        if (responseOptions) {\n          setResponseOptions(responseOptions);\n        }\n        const interval = setInterval(() => {\n          setIndex((index) => index + 1);\n        }, speed);\n        intervalRef.current = interval;\n        return () => clearInterval(interval);\n      }, []);\n  \n      useEffect(() => {\n        if (index < text?.length) {\n          if (showButton) {\n            setShowButton(false);\n          }\n          setCrawlText((crawlText) => crawlText + text[index]);\n        } else {\n          if (wordIndex === textArr[textArrayIndex].length - 1) {\n            setShowButton(true);\n          }\n          clearInterval(intervalRef.current);\n        }\n      }, [index]);\n  \n      return <TextComponentStyled style={style}>{crawlText}</TextComponentStyled>;\n    };\n  \n    const getDelay = (i) => {\n      let sum = 0;\n      if (i !== 0) {\n        sum = textArr[textArrayIndex].slice(0, i).reduce(\n          (partialSum, a) => partialSum + a.speed * a.text.length,\n          0\n        );\n      }\n      return sum;\n    };\n  \n    const handleDisplay = () => {\n      for (let i = 0; i < textArr[textArrayIndex]?.length; i++) {\n        setTimeout(() => {\n          if (\n            typeof textArr[textArrayIndex][i] === 'object' &&\n            !Array.isArray(textArr[textArrayIndex][i]) &&\n            textArr[textArrayIndex][i] !== null\n          ) {\n            setDisplayedElements((displayedElements) => [\n              ...displayedElements,\n              <div key={i}>\n                {buildMode && (\n                  <div\n                    style={{\n                      textAlign: 'center',\n                      borderRadius: 10,\n                      fontSize: 12,\n                      fontFamily: 'sans-serif',\n                      fontWeight: 'bold',\n                    }}\n                  >\n                    {textArr[textArrayIndex][i].speed < 100 && 'Fast\\t'}\n                    {textArr[textArrayIndex][i].speed >= 100 &&\n                      textArr[textArrayIndex][i].speed <= 200 &&\n                      'Medium\\t'}\n                    {textArr[textArrayIndex][i].speed > 200 && 'Slow\\t'}\n                    ({textArr[textArrayIndex][i].speed * textArr[textArrayIndex][i].text.length}ms)\n                  </div>\n                )}\n                <TextComponent\n                  key={i}\n                  text={textArr[textArrayIndex][i].text}\n                  speed={textArr[textArrayIndex][i].speed}\n                  style={textArr[textArrayIndex][i].style}\n                  responseOptions={textArr[textArrayIndex][i]?.responseOptions}\n                  wordIndex={i}\n                />\n              </div>,\n            ]);\n          } else {\n            const interval = setInterval(() => {}, textArr[textArrayIndex][i]);\n            intervalRef.current = interval;\n  \n            return () => clearInterval(interval);\n          }\n        }, getDelay(i));\n      }\n    };\n  \n    return (\n      <ContainerStyled>\n        <SpeakerStyled fontFamily={fontFamily} textColor={textColor} bgColor={bgColor}>\n          {speaker}\n        </SpeakerStyled>\n        <TextWrapperStyled fontFamily={fontFamily} textColor={textColor} bgColor={bgColor}>\n          {displayedElements}\n          {showButton && (\n            <DialogueButtonStyled\n              onClick={() => {\n                if (textArrayIndex < textArr.length - 1) {\n                  setTextArrayIndex((index) => index + 1);\n                } else {\n                  // setSceneIndex(index => index + 1)\n                }\n              }}\n            >\n              <div>A</div>\n            </DialogueButtonStyled>\n          )}\n        </TextWrapperStyled>\n        {responseOptions.map((option, index) => (\n          <div\n            key={index}\n            onClick={option.onClick}\n            style={{ backgroundColor: 'green', padding: 10, margin: 10, color: 'white', cursor: 'pointer' }}\n          >\n            {option.text}\n          </div>\n        ))}\n      </ContainerStyled>\n    );\n  };\n  \n","import styled from \"styled-components\";\nexport const ContainerStyled = styled.div`\n  display: flex;\n  flex-direction: column;\n`;\n\nexport const SpeakerStyled = styled.div`\n  font-family: ${({ fontFamily }) => fontFamily || 'sans-serif'};\n  width: 60vw;\n  color: ${({ textColor }) => textColor || 'white'};\n  font-size: 15px;\n  background: ${({ bgColor }) => bgColor || 'black'};\n  border-radius: 0;\n  padding: 10px;\n`;\n\nexport const TextWrapperStyled = styled.div`\n  font-family: ${({ fontFamily }) => fontFamily || 'sans-serif'};\n  position: relative;\n  background-color: ${({ bgColor }) => bgColor || 'black'};\n  font-size: 25px;\n  padding: 20px;\n  border-radius: 0;\n  color: ${({ textColor }) => textColor || '#f1f1f1'};\n  max-height: 50vh;\n  width: 60vw;\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  overflow-wrap: break-word;\n`;\n\n\n\nexport const TextComponentStyled = styled.div`\n  ${({ style }) => style};\n`;\nexport const DialogueButtonStyled = styled.div`\n\n    height:40px;\n    width:40px;\n    border-radius:100px;\n    display:flex;\n    align-items:center;\n    justify-content:center;\n    border: 1px solid #3cc8b4;\n    -webkit-animation: breathing 4s ease-out infinite normal;\n    animation: breathing 4s ease-out infinite normal;\n    background: #3cc8b4;\n    color: white;\n    -webkit-font-smoothing: antialiased;\n    text-align: center;    \n    font-weight:bold;\n    position:absolute;\n    bottom:-20px;\n    right:-20px;\n    font-family:silkscreenBold;\n    &: hover{\n      cursor: pointer;\n    }\n@-webkit-keyframes breathing {\n  0% {\n    -webkit-transform: scale(0.8);\n    transform: scale(0.8);\n  }\n\n  25% {\n    -webkit-transform: scale(1);\n    transform: scale(1);\n  }\n\n  60% {\n    -webkit-transform: scale(0.8);\n    transform: scale(0.8);\n  }\n\n  100% {\n    -webkit-transform: scale(0.8);\n    transform: scale(0.8);\n  }\n}\n\n@keyframes breathing {\n  0% {\n    -webkit-transform: scale(0.8);\n    -ms-transform: scale(0.8);\n    transform: scale(0.8);\n  }\n\n  25% {\n    -webkit-transform: scale(1);\n    -ms-transform: scale(1);\n    transform: scale(1);\n  }\n\n  60% {\n    -webkit-transform: scale(0.8);\n    -ms-transform: scale(0.8);\n    transform: scale(0.8);\n  }\n\n  100% {\n    -webkit-transform: scale(0.8);\n    -ms-transform: scale(0.8);\n    transform: scale(0.8);\n  }\n}\n\n  \n`;\n"],"names":[],"version":3,"file":"index.esm.js.map"}